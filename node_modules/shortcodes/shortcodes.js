"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var shortcodes = {};
exports.add = function (generic, callback) {
    if (typeof generic === 'string' && callback) {
        shortcodes[generic] = callback;
    }
    else {
        Object.keys(generic).forEach(function (name) {
            shortcodes[name] = generic[name];
        });
    }
};
exports.parse = function (input) {
    return input.replace(/(?=[^\]])\(([a-z0-9_-]+):(.*?)\)/gim, function (match, name, values) {
        if (!shortcodes[name]) {
            return match;
        }
        var attrs = {};
        var splitted = values.split(/(\s*([a-z0-9_-]+):\s*)/gim);
        attrs[name] = splitted.shift().trim();
        for (var i = 0; i < splitted.length; i += 3) {
            attrs[splitted[i + 1].trim()] = splitted[i + 2].trim();
        }
        return shortcodes[name](attrs);
    });
};
