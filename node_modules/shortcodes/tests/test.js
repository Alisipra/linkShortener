"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs_1 = require("fs");
var path_1 = require("path");
var shortcodes_1 = require("../shortcodes");
// API
describe('API', function () {
    it('provides a proper interface', function () {
        expect(typeof shortcodes_1.add).toBe('function');
        expect(typeof shortcodes_1.parse).toBe('function');
    });
});
// Parsing
describe('Parsing', function () {
    shortcodes_1.add('youtube', function (attrs) {
        return "<div class=\"youtube\" style=\"padding-top:" + (100 /
            parseInt(attrs.width, 10)) *
            parseInt(attrs.height, 10) + "%\"><iframe src=\"https://www.youtube.com/embed/" + attrs.youtube + "\" frameborder=\"0\"></iframe></div>";
    });
    shortcodes_1.add({
        pow: function (attrs) { return String(Math.pow(parseInt(attrs.pow, 10), 2)); },
        sqrt: function (attrs) { return String(Math.sqrt(parseInt(attrs.sqrt, 10))); },
    });
    ['works', 'parameters', 'ignore'].forEach(function (test) {
        var input = fs_1.readFileSync(path_1.resolve(__dirname, 'fixtures', test + ".txt"), 'utf8');
        it(test, function () {
            expect(shortcodes_1.parse(input)).toMatchSnapshot();
        });
    });
});
